# Dockerfile optimizado para desarrollo local rápido
# NO usar en producción - usar Dockerfile para Railway

FROM node:22-bullseye-slim

WORKDIR /app

# Instala solo lo necesario para desarrollo
RUN apt-get update \
  && apt-get install -y --no-install-recommends curl \
  && rm -rf /var/lib/apt/lists/*

# Copia package files
COPY package*.json ./

# Instala dependencias (incluye devDependencies)
RUN npm ci --prefer-offline --no-audit --progress=false

# Copia todo el código
COPY . .

ENV NODE_ENV=development
ENV PORT=3000
EXPOSE 3000

# Inicia en modo watch
CMD ["npm", "run", "start:dev-next"]
